(self.webpackChunkpapupata_docs=self.webpackChunkpapupata_docs||[]).push([[7987,4465],{1040:function(t,e,n){"use strict";n.d(e,{P:function(){return r}});var r=n(7294).createContext(!1)},2275:function(t,e,n){"use strict";n.d(e,{Z:function(){return Z}});var r,l,a=n(6848),u=n(7294),o=n(366),i=n(3431),s=o.ZP.div(r||(r=(0,a.Z)(["\n  border-left: 4px solid #663399;\n  padding: 5px 0 5px 10px;\n"]))),p=o.ZP.div(l||(l=(0,a.Z)(["\n  display: inline-block;\n  margin-left: 10px;\n  font-size: 0.9em;\n"])));function Z(t){var e=t.variants,n=t.isRecommendation,r=(0,u.useState)("2.x"),l=r[0],a=r[1],o=(0,u.useCallback)((function(t){a(t.target.value)}),[]);return(0,i.tZ)(s,null,(0,i.tZ)("select",{value:l,onChange:o},(0,i.tZ)("option",{value:"1.x"},"Papupata 1.x"),(0,i.tZ)("option",{value:"2.x"},"Papupata 2.x")),n&&(0,i.tZ)(p,null,"Older styles are still supported in later versions, just not preferred."),Object.keys(e).filter((function(t){return function(t,e){return"*"===e||e===t}(l,t)})).map((function(t){return(0,i.tZ)("div",{key:t},e[t])})))}},1724:function(t,e,n){"use strict";n.d(e,{$0:function(){return y},OT:function(){return P},ag:function(){return b},cY:function(){return A},l1:function(){return k},aE:function(){return w},d2:function(){return q},pR:function(){return T},by:function(){return g},yV:function(){return C},en:function(){return R},iT:function(){return D},Vo:function(){return O},lS:function(){return j}});var r,l,a,u,o,i,s,p,Z,c=n(6848),d=n(366),m=n(7294),f=n(1808),h=n(1040),v=n(3431),y=d.ZP.section(r||(r=(0,c.Z)([""]))),P=d.ZP.h4(l||(l=(0,c.Z)([""]))),I=d.ZP.h5(a||(a=(0,c.Z)([""]))),x=d.ZP.section(u||(u=(0,c.Z)(["\n  padding: 15px 30px;\n  background: lightyellow;\n"]))),b=function(t){var e=t.children;return(0,v.tZ)(y,null,(0,v.tZ)(P,null,"Purpose"),e)},A=function(t){var e=t.version;return(0,v.tZ)(y,null,(0,v.tZ)(P,null,"Availability"),"This functionality is available from papupata version ",e," onwards.")},k=function(t){var e=t.children;return(0,v.tZ)(y,null,(0,v.tZ)(P,null,"Usage"),e)},w=function(t){var e=t.children,n=t.includeAvailableFrom,r=t.label;return(0,v.tZ)(y,null,(0,v.tZ)(h.P.Provider,{value:!!n},(0,v.tZ)(P,null,"Parameters",r&&": "+r),e?(0,v.tZ)("table",null,(0,v.tZ)("thead",null,(0,v.tZ)("tr",null,(0,v.tZ)("th",null,"Name"),(0,v.tZ)("th",null,"Type"),(0,v.tZ)("th",null,"Description"),n&&(0,v.tZ)("th",null,"Introduced in"))),(0,v.tZ)("tbody",null,e)):(0,v.tZ)("p",null,"There are no parameters.")))},q=function(t){var e=t.children,n=t.name,r=t.dataType,l=t.availableFrom,a=void 0===l?"1.0.0":l,u=m.useContext(h.P);return(0,v.tZ)("tr",null,(0,v.tZ)("td",null,n),(0,v.tZ)("td",null,r),(0,v.tZ)("td",null,e),u&&(0,v.tZ)("td",null,a))},T=function(t){var e=t.children;return(0,v.tZ)(y,null,(0,v.tZ)(P,null,"Returns"),e)},g=function(t){var e=t.children;return(0,v.tZ)(y,null,(0,v.tZ)(P,null,"Caveats"),e)},C=function(t){var e=t.children;return(0,v.tZ)(y,null,(0,v.tZ)(P,null,"Examples"),e)},R=function(t){var e=t.children,n=t.label;return(0,v.tZ)(m.Fragment,null,n&&(0,v.tZ)(I,null,n),(0,v.tZ)(f.E,{language:"typescript"},e))},D=function(t){var e=t.children;return(0,v.tZ)(x,null,(0,v.tZ)(I,null,"Common to examples below:"),e)},O=function(t){var e=t.children,n=t.includeAvailableFrom;return(0,v.tZ)(y,null,(0,v.tZ)(P,null,"Type parameeters"),(0,v.tZ)(h.P.Provider,{value:!!n},(0,v.tZ)(P,null,"Parameters"),e?(0,v.tZ)("table",null,(0,v.tZ)("thead",null,(0,v.tZ)("tr",null,(0,v.tZ)("th",null,"Name"),(0,v.tZ)("th",null,"Default value"),(0,v.tZ)("th",null,"Description"),n?(0,v.tZ)("th",null,"Introduced in"):"")),(0,v.tZ)("tbody",null,e)):(0,v.tZ)("p",null,"There are no parameters.")))},F=d.ZP.tr(o||(o=(0,c.Z)([""]))),N=d.ZP.td(i||(i=(0,c.Z)([""]))),B=d.ZP.td(s||(s=(0,c.Z)([""]))),E=d.ZP.td(p||(p=(0,c.Z)([""]))),M=d.ZP.td(Z||(Z=(0,c.Z)([""]))),j=function(t){var e=t.children,n=t.name,r=t.defaultValue,l=t.availableFrom,a=void 0===l?"none":l,u=m.useContext(h.P);return(0,v.tZ)(F,null,(0,v.tZ)(N,null,n),(0,v.tZ)(B,null,r),(0,v.tZ)(E,null,e),u?(0,v.tZ)(M,null,a):"")}},5361:function(t,e,n){"use strict";n.d(e,{g2:function(){return p},eC:function(){return d},If:function(){return m}});var r,l,a,u=n(6848),o=(n(7294),n(1724)),i=n(366),s=n(3431);function p(t){var e=t.children;return(0,s.tZ)(o.$0,null,(0,s.tZ)(o.OT,null,"Overview"),e)}var Z=i.ZP.h4(r||(r=(0,u.Z)([""]))),c=i.ZP.h5(l||(l=(0,u.Z)(["\n  font-size: 1.1em;\n"])));function d(t){var e=t.content;return(0,s.tZ)("div",null,(0,s.tZ)(o.$0,null,(0,s.tZ)(o.OT,null,"Table of contents"),(0,s.tZ)("ul",null,e.map((function(t){return(0,s.tZ)("li",{style:{marginLeft:18*(t.level||0)},key:t.anchor},(0,s.tZ)("a",{href:"#"+t.anchor},t.heading))})))),e.map((function(t){var e=t.level?c:Z;return(0,s.tZ)(o.$0,{id:t.anchor,key:t.anchor},(0,s.tZ)(e,null,t.heading),t.content)})))}var m=i.ZP.span(a||(a=(0,u.Z)(["\n  font-family: 'Consolas', 'Bitstream Vera Sans Mono', 'Courier New', Courier, monospace;\n"])))},2512:function(t,e,n){"use strict";n.d(e,{iu:function(){return T},C9:function(){return g},iq:function(){return C},JM:function(){return R}});var r,l,a,u,o,i,s,p=n(6848),Z=n(1724),c=n(7294),d=n(366),m=n(5444),f=n(1040),h=n(3431),v=d.ZP.tr(r||(r=(0,p.Z)([""]))),y=d.ZP.td(l||(l=(0,p.Z)([""]))),P=d.ZP.td(a||(a=(0,p.Z)([""]))),I=d.ZP.td(u||(u=(0,p.Z)([""]))),x=d.ZP.td(o||(o=(0,p.Z)([""]))),b=d.ZP.td(i||(i=(0,p.Z)([""]))),A=d.ZP.td(s||(s=(0,p.Z)([""])));function k(t){var e=t.children,n=(0,c.useContext)(w).includeRequiredColumn;if(!n&&e)throw new Error("Being asked to show required cell, yet it does not exist");return n?(0,h.tZ)(b,null,e):null}var w=(0,c.createContext)({context:"",includeRequiredColumn:!1}),q=function(t){var e=t.name,n=t.children,r=(0,c.useContext)(w).context;return(0,h.tZ)(y,null,(0,h.tZ)(m.rU,{to:"/api/"+r+"/"+e},n||e))},T=function(t){var e=t.children,n=t.context,r=t.includeRequiredColumn,l=t.includeAvailableFrom;return(0,h.tZ)(Z.$0,null,(0,h.tZ)(w.Provider,{value:{context:n,includeRequiredColumn:!!r}},(0,h.tZ)(f.P.Provider,{value:!!l},(0,h.tZ)(Z.OT,null,"Members"),(0,h.tZ)("table",null,(0,h.tZ)("thead",null,(0,h.tZ)("th",null,"Name"),(0,h.tZ)("th",null,"Type"),(0,h.tZ)("th",null,"Data type/return type"),(0,h.tZ)("th",null,"Description"),r&&(0,h.tZ)("th",null,"Required"),l&&(0,h.tZ)("th",null,"Introduced in")),(0,h.tZ)("tbody",null,e)))))},g=function(t){var e=t.children,n=t.name,r=t.dataType,l=t.required,a=t.displayName,u=t.availableFrom,o=c.useContext(f.P);return(0,h.tZ)(v,null,(0,h.tZ)(q,{name:n},a),(0,h.tZ)(P,null,"method"),(0,h.tZ)(I,null,r),(0,h.tZ)(x,null,e),(0,h.tZ)(k,null,!0===l?"Yes":!1===l?"No":l),o?(0,h.tZ)(A,null,u):"")},C=function(t){var e=t.children,n=t.name,r=t.dataType,l=t.required,a=t.availableFrom,u=t.link,o=c.useContext(f.P);return(0,h.tZ)(v,null,u?(0,h.tZ)(q,{name:n},n):(0,h.tZ)(y,null,n),(0,h.tZ)(P,null,"property"),(0,h.tZ)(I,null,r),(0,h.tZ)(x,null,e),(0,h.tZ)(k,null,!0===l?"Yes":!1===l?"No":l),o?(0,h.tZ)(A,null,a):"")},R=function(t){var e=t.children,n=t.name;return(0,h.tZ)(v,null,(0,h.tZ)(y,null,n),(0,h.tZ)(P,null,"property"),(0,h.tZ)(I,null,"n/a"),(0,h.tZ)(x,null,e,". Type type itself must be accessed using the typeof operator."))}},2607:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Z},OptionsTable:function(){return c}});n(1879),n(7294);var r=n(1724),l=n(832),a=n(5361),u=n(2512),o=n(7614),i=n(2275),s=n(387),p=n(3431);function Z(){return(0,p.tZ)(s.Z,null,(0,p.tZ)(o.Z,null,(0,p.tZ)(l.Z,null,(0,p.tZ)("h1",null,"API Reference"),(0,p.tZ)("h2",null,"module invokeImplementationAdapter"),(0,p.tZ)("h3",null,"Default export createInvokeImplementationAdapter")),(0,p.tZ)(r.ag,null,"This module allows you to use invoke implemented APIs with no express server. This is primarily used for testing."),(0,p.tZ)(r.cY,{version:"1.5.0"}),(0,p.tZ)(r.l1,null,(0,p.tZ)(i.Z,{variants:{"1.x":(0,p.tZ)(r.en,null,"\n                  import createInvokeImplementationAdapter from 'papupata/dist/main/invokeImplementationAdapter'\n                "),"2.x":(0,p.tZ)(r.en,null,"\n                  import createInvokeImplementationAdapter from 'papupata/adapters/invokeImplementation'\n                ")}}),(0,p.tZ)("p",null,"Call the function with any options you wish and use the returned value as the ",(0,p.tZ)(a.If,null,"requestAdapter")," of the APIDeclaration. As always, a base url needs to be set up to make calls, but its value is ultimately irrelevant when using this adapter.")),(0,p.tZ)(r.aE,null,(0,p.tZ)(r.d2,{name:"options",dataType:"Object?"},(0,p.tZ)(c,null))),(0,p.tZ)(r.pR,null,"Papupata MakeRequestAdapter"),(0,p.tZ)(r.yV,null,(0,p.tZ)(i.Z,{variants:{"1.x":(0,p.tZ)(r.en,null,"\n                    import { APIDeclaration } from 'papupata'\n                    import createInvokeImplementationAdapter from 'papupata/dist/main/invokeImplementationAdapter'\n                    import express from 'express'\n\n                    const app = express()\n                    const request = supertest(app)\n                    const API = new APIDeclaration()\n                    API.configure({\n                      app,\n                      baseURL: '',\n                      makeRequest: createInvokeImplementationAdapter()\n                    })\n                  "),"2.x":(0,p.tZ)(r.en,null,"\n                    import { APIDeclaration } from 'papupata'\n                    import createInvokeImplementationAdapter from 'papupata/adapters/invokeImplementation'\n                    import express from 'express'\n\n                    const app = express()\n                    const request = supertest(app)\n                    const API = new APIDeclaration()\n                    API.configure({\n                      app,\n                      baseURL: '',\n                      requestAdapter: createInvokeImplementationAdapter()\n                    })\n                  ")}}))))}function c(){return(0,p.tZ)(u.iu,{context:"options",includeRequiredColumn:!0},(0,p.tZ)(u.C9,{name:"createRequest",dataType:"(requestBase) => Request",required:!1},(0,p.tZ)("p",null,"This function is used to create the request passed to the API as if it was the express request. Its sole parameter is a very minimal version of the request, which you may use as a template."),(0,p.tZ)("p",null,"This method can be used to add any necessary fields to the request."),(0,p.tZ)(r.en,null,"\n           const createRequest = base => ({...base, headers: { 'content-type': 'text/html' }})\n       ")),(0,p.tZ)(u.C9,{name:"createResponse",dataType:"(responseBase) => Response",required:!1},(0,p.tZ)("p",null,"This function is used to create the response passed to the API as if it was the express response. Its sole parameter a wrapper papupata uses to handle the response, which can be extended with other properties and methods as necessary."),(0,p.tZ)(r.en,null,"\n           const createResponse = base => ({...base, myField: true})\n       ")),(0,p.tZ)(u.C9,{name:"assertResponse",dataType:"(response) => void",required:!1},(0,p.tZ)("p",null,"This function is called once the response is complete. It is passed a mock express response, allowing for making assertions to whatever it may contain."),(0,p.tZ)(r.en,null,"\n           const assertResponse = res => expect(res.statusCode).toEqual(400)\n       ")),(0,p.tZ)(u.iq,{name:"withMiddleware",dataType:"boolean",required:!1},(0,p.tZ)("p",null,"By default, and if explicitly set to false only the API implementation is called and all middleware is ignored."),(0,p.tZ)("p",null,"If set to true, any express and papupata middleware on the route is run as normal for the requests.")))}},2791:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return p}});n(1879),n(7294);var r=n(1724),l=n(832),a=n(7614),u=n(2275),o=n(387),i=n(2607),s=n(3431);function p(){return(0,s.tZ)(o.Z,null,(0,s.tZ)(a.Z,null,(0,s.tZ)(l.Z,null,(0,s.tZ)("h1",null,"API Reference"),(0,s.tZ)("h2",null,"module testInvoker"),(0,s.tZ)("h3",null,"Default export testInvoke")),(0,s.tZ)(r.ag,null,"This module allows you to use invoke implemented APIs with no express server. This is primarily used for testing."),(0,s.tZ)(r.cY,{version:"1.5.0"}),(0,s.tZ)(r.l1,null,(0,s.tZ)(u.Z,{variants:{"1.x":(0,s.tZ)(r.en,null,"import testInvoke from 'papupata/dist/main/testInvoker'"),"2.x":(0,s.tZ)(r.en,null,"import testInvoke from 'papupata/invokers/test'")}}),(0,s.tZ)("p",null,"Call the function with the DeclaredAPI you wish to invoke and any parameters you wish to pass to it, as if you were calling it normally.")),(0,s.tZ)(r.aE,null,(0,s.tZ)(r.d2,{name:"api",dataType:"DeclaredAPI"},"The API you wish to invoke"),(0,s.tZ)(r.d2,{name:"args",dataType:"Object"},"Arguments to the API. Non-object bodies are not supported."),(0,s.tZ)(r.d2,{name:"options",dataType:"Object?"},(0,s.tZ)(i.OptionsTable,null))),(0,s.tZ)(r.pR,null,"Papupata MakeRequestAdapter"),(0,s.tZ)(r.yV,null,(0,s.tZ)(u.Z,{variants:{"1.x":(0,s.tZ)(r.en,{label:"Basic case"},"\n                  import { APIDeclaration } from 'papupata'\n                  import testInvoke from 'papupata/dist/main/testInvoker'\n                  import express from 'express'\n\n                  const app = express()\n                  const request = supertest(app)\n                  const API = new APIDeclaration()\n                  const api = API.declareGetAPI('/').query(['id'] as const).response<string>()\n\n                  testInvoke(api, {id: '123'})\n                "),"2.x":(0,s.tZ)(r.en,{label:"Basic case"},"\n                  import { APIDeclaration } from 'papupata'\n                  import testInvoke from 'papupata/invokers/test'\n                  import express from 'express'\n\n                  const app = express()\n                  const request = supertest(app)\n                  const API = new APIDeclaration()\n                  const api = API.declareGetAPI('/').query({id: String}).response<string>()\n\n                  testInvoke(api, {id: '123'})\n                ")}}),(0,s.tZ)(r.en,{label:"With options"},"\n            testInvoke(api, {id: '123'}, {withMiddleware: true})\n          "))))}}}]);
//# sourceMappingURL=component---src-pages-api-test-invoker-tsx-079e77617f20afc52481.js.map