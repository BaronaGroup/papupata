(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{485:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n(435),s=n(129),i=n(436),r=n(496),l=n(434),c=n(48),u=n(0);t.default=function(){return Object(u.d)(i.a,null,Object(u.d)(o.a,null,Object(u.d)(s.a,null,Object(u.d)("h1",null,"Guide: setting up papupata for clients"),Object(u.d)(r.c,null,"_ When you want to use papupata to make API calls, you first need to set it up. This guide covers the most common cases and gives pointer for less common ones."),Object(u.d)(r.b,{content:[{heading:"Prerequisites",anchor:"prerequisites",content:Object(u.d)(a.Fragment,null,Object(u.d)("p",null,"Before starting this guide, you need to have an API declaration. For information on how to get there, see ",Object(u.d)(c.a,{to:"/guides/declaring"},"Declaring APIs"),"."))},{heading:"The Basics",anchor:"basics",content:Object(u.d)(a.Fragment,null,Object(u.d)("p",null,"There are a few things that always need to be set up when you want to make requests with papupata:"),Object(u.d)("ul",null,Object(u.d)("li",null,"Base URL, that is, where to connect to"),Object(u.d)("li",null,"A mechanism for actually making requests")),Object(u.d)("p",null,"As this time there are no other settings."),Object(u.d)("p",null,"The configuration happens using the ",Object(u.d)(r.a,null,"configure"))," ","method on an API declaration.",Object(u.d)(l.c,null,"\n                    const API = new APIDeclaration()\n                    API.configure({\n                      baseUrl: 'https://example.com',\n                    })\n                  "),Object(u.d)("p",null,"If you want to only update some of the settings, you can get the existing configure and reconfigure the api declaration based on it."),Object(u.d)(l.c,null,"\n                    const API = new APIDeclaration()\n                    API.configure({\n                      ...api.getConfig(),\n                      baseUrl: 'https://example.com',\n                    })\n                  "))},{heading:"Base URL",anchor:"baseurl",content:Object(u.d)(a.Fragment,null,Object(u.d)("p",null,"The base URL is an URL where the declared APIs can be found. Typically it is either a blank string or combination of protocol and a hostname, but it is possible to include a path as well."),Object(u.d)("p",null,"In browser world APIs are commonly hosted from the same server that also hosts the client. In these situations you generally want the URLs to be relative to the root of the current host. This can be accomplished by passing in an empty string as the base URL."),Object(u.d)(l.c,null,"\n                  const api = API.declareGetAPI('/hello').response<string>()\n                  API.configure({baseURL: ''})\n                  await api() // invokes /hello\n                  "),Object(u.d)("p",null,"Sometimes the APIs are served by other servers, and if your client is a node.js application you are always going to have to provide an actual URL."),Object(u.d)(l.c,null,"\n                  const api = API.declareGetAPI('/hello').response<string>()\n                  API.configure({baseURL: 'https://www.example.com'})\n                  await api() // invokes https://www.example.com/hello\n                  "),Object(u.d)("p",null,"At times it might be beneficial to implement the APIs somewhere other than the root of the server. Typically it'd be better to include the path in the actual API paths, but the clients can also include it in the base URL."),Object(u.d)(l.c,null,"\n                  const api = API.declareGetAPI('/hello').response<string>()\n                  API.configure({baseURL: 'https://www.example.com/api'})\n                  await api() // invokes https://www.example.com/api/hello\n                  "))},{heading:"Mechanism for making requests",anchor:"makeRequest",content:Object(u.d)(a.Fragment,null,Object(u.d)("p",null,"Making HTTP requests in typescript can be tricky because of varying capabilities of execution environments. Different browsers and node.js have different options available, some of which might or might not suit all your needs."),Object(u.d)("p",null,"Papupata makes no assumptions about the mechanism used to make the requests, instead one must be provided to it. This is done using the ",Object(u.d)(r.a,null,"makeRequest")," configuration option."),Object(u.d)("p",null,"In many cases you might want to build your implementation, but there are two simple implementations provided with papupata, which can also serve as examples for your own implementations."))},{heading:"fetchAdapter",anchor:"fetchAdapter",level:1,content:Object(u.d)(a.Fragment,null,Object(u.d)("p",null,"This utilizes global fetch, and as such is mostly suited for browsers. It only supports JSON bodies, responses can be either JSON or plain text. Any response codes above and including 400 cause a generic error to be thrown."),Object(u.d)("p",null,"Simply put, in its current state the adapter is only really suitable for extremely simple use cases."),Object(u.d)(l.c,null,"\n                    import fetchAdapter from 'papupata/dist/fetch-adapter'\n                    API.configure({\n                      ...API.getConfig(),\n                      makeRequest: fetchAdapter\n                    })\n                  "),Object(u.d)("p",null,"Having said that, it should be fairly straightforward to expand the implementation to suit your needs."))},{heading:"requestPromiseAdapter",anchor:"requestPromiseAdapter",level:1,content:Object(u.d)(a.Fragment,null,Object(u.d)("p",null,"This adapter utilizes request-promise and while certainly simple it is much better suited for many purposes. It should be usable on both node.js and browser environments, supports json and form data as well as non-object bodies."),Object(u.d)(l.c,null,"\n                    import createRequestPromiseAdapter from 'papupata/dist/request-promise-adapter'\n                    API.configure({\n                      ...API.getConfig(),\n                      makeRequest: createRequestPromiseAdapter('json') // could pass 'form' for form data payloads\n                    })\n                  "),Object(u.d)("p",null,"Regardless, it is quite likely that you'll want to create your own version to add some little things you need, such as headers."))},{heading:"Custom adapters",anchor:"customAdapter",level:1,content:Object(u.d)(a.Fragment,null,Object(u.d)("p",null,"As has probably become evident, you'll likely want to create a custom adapter of your own. The easiest option is probably to take one of the existing adapters to use it as a template."),Object(u.d)("p",null,"See ",Object(u.d)(c.a,{to:"/guides/client/customRequestAdapters"},"custom request adapters")," for more information."))},{heading:"Conclusion",anchor:"conclusion",content:Object(u.d)(a.Fragment,null,Object(u.d)("p",null,"Now that papupata is set up to make requests, it should be a good time to make that happen!"),Object(u.d)("p",null,"See ",Object(u.d)(c.a,{to:"/guides/client/calling"},"calling APIs")," for how to do exactly that."))}]}))))}},496:function(e,t,n){"use strict";n.d(t,"c",(function(){return u})),n.d(t,"b",(function(){return h})),n.d(t,"a",(function(){return b}));n(497),n(1);var a=n(434),o=n(4),s=n(0);function i(){var e=c(['\n  font-family: "Consolas", "Bitstream Vera Sans Mono", "Courier New", Courier, monospace\n']);return i=function(){return e},e}function r(){var e=c(["\n  font-size: 1.1em;\n"]);return r=function(){return e},e}function l(){var e=c([""]);return l=function(){return e},e}function c(e,t){return t||(t=e.slice(0)),e.raw=t,e}function u(e){var t=e.children;return Object(s.d)(a.j,null,Object(s.d)(a.k,null,"Overview"),t)}var d=o.a.h4(l()),p=o.a.h5(r());function h(e){var t=e.content;return Object(s.d)("div",null,Object(s.d)(a.j,null,Object(s.d)(a.k,null,"Table of contents"),Object(s.d)("ul",null,t.map((function(e){return Object(s.d)("li",{style:{marginLeft:18*(e.level||0)},key:e.anchor},Object(s.d)("a",{href:"#"+e.anchor},e.heading))})))),t.map((function(e){var t=e.level?p:d;return Object(s.d)(a.j,{id:e.anchor,key:e.anchor},Object(s.d)(t,null,e.heading),e.content)})))}var b=o.a.span(i())},497:function(e,t,n){"use strict";n(102)("anchor",(function(e){return function(t){return e(this,"a","name",t)}}))}}]);
//# sourceMappingURL=component---src-pages-guides-server-setup-tsx-5c47b0c6663eab332a7f.js.map