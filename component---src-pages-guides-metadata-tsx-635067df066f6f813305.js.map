{"version":3,"sources":["webpack:///./src/components/IncludeAvailableFromContext.tsx","webpack:///./src/components/api-components.tsx","webpack:///./src/components/guides.tsx","webpack:///./src/pages/guides/metadata.tsx"],"names":["IncludeAvailableFromContext","React","Section","styled","section","SectionHeading","h4","SubHeading","h5","ExampleCommonContainer","Purpose","children","AvailableFrom","version","Usage","Parameters","includeAvailableFrom","label","Provider","value","Parameter","name","dataType","availableFrom","useContext","MethodReturnType","Caveats","Examples","Example","language","ExampleCommon","TypeParameters","Row","tr","NameColumn","td","DefaultValueColumn","DescriptionColumn","AvailableFromColumn","TypeParameter","defaultValue","Overview","Level0","Level1","GuideContent","content","map","child","style","marginLeft","level","key","anchor","href","heading","Heading","id","FixedFont","span","IndexPage"],"mappings":"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","file":"component---src-pages-guides-metadata-tsx-635067df066f6f813305.js","sourcesContent":["import * as React from 'react'\n\nexport const IncludeAvailableFromContext = React.createContext(false)\n","import styled from 'styled-components'\r\nimport React, { ReactNode } from 'react'\r\nimport { Code } from './Code'\r\nimport { IncludeAvailableFromContext } from './IncludeAvailableFromContext'\r\n\r\nexport const Section = styled.section``\r\nexport const SectionHeading = styled.h4``\r\nexport const SubHeading = styled.h5``\r\nexport const ExampleCommonContainer = styled.section`\r\n  padding: 15px 30px;\r\n  background: lightyellow;\r\n`\r\n\r\nexport const Purpose: React.FC = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Purpose</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport type ValidVersions = '1.1.0' | '1.2.0' | '1.5.0' | '1.8.0'\r\nexport const AvailableFrom = ({ version }: { version: ValidVersions }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Availability</SectionHeading>\r\n      This functionality is available from papupata version {version} onwards.\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport const Usage: React.FC = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Usage</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\nexport const Parameters: React.FC<{ includeAvailableFrom?: boolean; label?: string }> = ({ children, includeAvailableFrom, label }) => {\r\n  return (\r\n    <Section>\r\n      <IncludeAvailableFromContext.Provider value={!!includeAvailableFrom}>\r\n        <SectionHeading>Parameters{label && `: ${label}`}</SectionHeading>\r\n        {children ? (\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Type</th>\r\n                <th>Description</th>\r\n                {includeAvailableFrom && <th>Introduced in</th>}\r\n              </tr>\r\n            </thead>\r\n            <tbody>{children}</tbody>\r\n          </table>\r\n        ) : (\r\n          <p>There are no parameters.</p>\r\n        )}\r\n      </IncludeAvailableFromContext.Provider>\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport const Parameter: React.FC<{ name: string; dataType: any; availableFrom?: ValidVersions }> = ({\r\n  children,\r\n  name,\r\n  dataType,\r\n  availableFrom = '1.0.0'\r\n}) => {\r\n  const includeAvailableFrom = React.useContext(IncludeAvailableFromContext)\r\n  return (\r\n    <tr>\r\n      <td>{name}</td>\r\n      <td>{dataType}</td>\r\n      <td>{children}</td>\r\n      {includeAvailableFrom && <td>{availableFrom}</td>}\r\n    </tr>\r\n  )\r\n}\r\n\r\nexport const MethodReturnType: React.FC = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Returns</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport const Caveats: React.FC = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Caveats</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\nexport const Examples: React.FC<{ children: any }> = ({ children }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Examples</SectionHeading>\r\n      {children}\r\n    </Section>\r\n  )\r\n}\r\n\r\nexport const Example: React.FC<{ label?: string; children: string }> = ({ children, label }) => {\r\n  return (\r\n    <>\r\n      {label && <SubHeading>{label}</SubHeading>}\r\n      <Code language={'typescript'}>{children}</Code>\r\n    </>\r\n  )\r\n}\r\n\r\nexport const ExampleCommon: React.FC<{ children: any }> = ({ children }) => {\r\n  return (\r\n    <ExampleCommonContainer>\r\n      <SubHeading>Common to examples below:</SubHeading>\r\n      {children}\r\n    </ExampleCommonContainer>\r\n  )\r\n}\r\n\r\nexport const TypeParameters: React.FC<{ children: ReactNode; includeAvailableFrom?: boolean }> = ({ children, includeAvailableFrom }) => {\r\n  return (\r\n    <Section>\r\n      <SectionHeading>Type parameeters</SectionHeading>\r\n      <IncludeAvailableFromContext.Provider value={!!includeAvailableFrom}>\r\n        <SectionHeading>Parameters</SectionHeading>\r\n        {children ? (\r\n          <table>\r\n            <thead>\r\n              <tr>\r\n                <th>Name</th>\r\n                <th>Default value</th>\r\n                <th>Description</th>\r\n                {includeAvailableFrom ? <th>Introduced in</th> : ''}\r\n              </tr>\r\n            </thead>\r\n            <tbody>{children}</tbody>\r\n          </table>\r\n        ) : (\r\n          <p>There are no parameters.</p>\r\n        )}\r\n      </IncludeAvailableFromContext.Provider>\r\n    </Section>\r\n  )\r\n}\r\n\r\nconst Row = styled.tr``\r\nconst NameColumn = styled.td``\r\nconst DefaultValueColumn = styled.td``\r\nconst DescriptionColumn = styled.td``\r\nconst AvailableFromColumn = styled.td``\r\n\r\nexport const TypeParameter: React.FC<{ name: string; defaultValue?: string; availableFrom?: string }> = ({\r\n  children,\r\n  name,\r\n  defaultValue,\r\n  availableFrom = 'none'\r\n}) => {\r\n  const includeAvailableFrom = React.useContext(IncludeAvailableFromContext)\r\n  return (\r\n    <Row>\r\n      <NameColumn>{name}</NameColumn>\r\n      <DefaultValueColumn>{defaultValue}</DefaultValueColumn>\r\n      <DescriptionColumn>{children}</DescriptionColumn>\r\n      {includeAvailableFrom ? <AvailableFromColumn>{availableFrom}</AvailableFromColumn> : ''}\r\n    </Row>\r\n  )\r\n}\r\n","import React, { ReactNode } from 'react'\nimport { Section, SectionHeading } from './api-components'\nimport styled from 'styled-components'\n\nexport function Overview({ children }: { children: ReactNode }) {\n  return (\n    <Section>\n      <SectionHeading>Overview</SectionHeading>\n      {children}\n    </Section>\n  )\n}\n\ninterface GuidePart {\n  heading: ReactNode\n  anchor: string\n  content: ReactNode\n  level?: number\n}\n\nconst Level0 = styled.h4``\nconst Level1= styled.h5`\n  font-size: 1.1em;\n`\n\nexport function GuideContent({ content }: { content: GuidePart[] }) {\n  return (\n    <div>\n      <Section>\n        <SectionHeading>Table of contents</SectionHeading>\n        <ul>\n          {content.map(child => (\n            <li style={{ marginLeft: 18 * (child.level || 0) }} key={child.anchor}>\n              <a href={`#${child.anchor}`}>{child.heading}</a>\n            </li>\n          ))}\n        </ul>\n      </Section>\n      {content.map(child => {\n        const Heading = !child.level ? Level0 : Level1\n        return (\n          <Section id={child.anchor} key={child.anchor}>\n            <Heading>{child.heading}</Heading>\n            {child.content}\n          </Section>\n        )\n      })}\n    </div>\n  )\n}\n\nexport const FixedFont = styled.span`\n  font-family: \"Consolas\", \"Bitstream Vera Sans Mono\", \"Courier New\", Courier, monospace\n`\n","import * as React from 'react'\nimport { Example } from '../../components/api-components'\nimport Container from '../../components/Container'\nimport { FixedFont, GuideContent, Overview } from '../../components/guides'\nimport Page from '../../components/Page'\nimport IndexLayout from '../../layouts'\n\nconst IndexPage = () => (\n  <IndexLayout>\n    <Page>\n      <Container>\n        <h1>Guide: accessing metadata</h1>\n        <Overview>\n          Papupata allows you to declare, call and implement APIs. Sometimes you need to do something slightly different though and need\n          access to information about the API. This guide helps you with that.\n        </Overview>\n        <GuideContent\n          content={[\n            {\n              heading: 'To begin with',\n              anchor: 'setup',\n              content: (\n                <>\n                  <p>It might be helpful fairly solid understanding of what papupata API declarations look like.</p>\n                  <p>In the examples presented in this guide, the following API declaration is assumed to be in the scope:</p>\n                  <Example>{`\n                  const complexAPI = API.declarePostAPI('/update/:id', routeOptions)\n                    .params(['id'] as const)\n                    .query(['author'] as const)\n                    .optionalQuery(['timestamp'] as const)\n                    .queryBool(['notifyWatchers'] as const)\n                    .body<{ name: string}>()\n                    .response<{status: string }>()\n                  `}</Example>\n                </>\n              )\n            },\n            {\n              heading: 'URLs and methods',\n              anchor: 'endpoints',\n              content: (\n                <>\n                  <p>\n                    The most basic things, path and method as specified when declared the API can be accessed directly from the api object.\n                  </p>\n                  <Example>{`\n                  const {method, path} = complexAPI\n                  // method: post\n                  // path: /update/:id\n                `}</Example>\n                  <p>\n                    The path might not be quite what you need though. Perhaps you want a full URL, with path and possibly query parameters\n                    already in place. This can be done with the <FixedFont>getURL</FixedFont> method. Do note that the method requires{' '}\n                    <FixedFont>baseURL</FixedFont> to be configured.\n                  </p>\n                  <Example>{`\n                    API.configure({\n                      ...api.getConfig(),\n                      baseURL: 'https://www.example.com'\n                    })\n                    console.log(complexAPI.getURL({id: '123'})) \n                    // https://www.example.com/update/123\n\n                    console.log(complexAPI.getURL({id: '123', author: 'Bob'})) \n                    // https://www.example.com/update/123?author=Bob\n                  `}</Example>\n                </>\n              )\n            },\n            {\n              heading: 'Path and query parameters',\n              anchor: 'parameters',\n              content: (\n                <>\n                  <p>\n                    The names and types of path and query parameters are accessible from the <FixedFont>apiUrlParameters</FixedFont>{' '}\n                    property of the api.\n                  </p>\n                  <Example>{`\n                    const {(params, query, optionalQuery, boolQuery)} = api.apiUrlParameters\n                  `}</Example>\n                  The are tuples in nature, but can be treated as arrays of strings.\n                </>\n              )\n            },\n            {\n              heading: 'Types',\n              anchor: 'types',\n              content: (\n                <>\n                  <p>\n                    This is where things get a little bit more interesting. You can't just export types from and object in typescript, but\n                    that's what an API is. Papupata uses a workaround for this problem which looks odd at first, but you get used to it\n                    quickly enough. That is, the api exports values that as far as typescript is concerned match the various types used by\n                    papupata, allowing the use of <FixedFont>typeof</FixedFont> operator to access the actual type.\n                  </p>\n                </>\n              )\n            },\n            {\n              heading: 'Response',\n              anchor: 'types_response',\n              level: 1,\n              content: (\n                <>\n                  <p>Let's start with the type of the response.</p>\n                  <Example>{`\n                    const ApiResponseType = typeof complexApi.ResponseType\n                  `}</Example>\n                  <p>\n                    In situations where the type of the response returned by the implementation is different from the one observed by the\n                    client, <FixedFont>ServerResponseType</FixedFont> indicates the type the server is expected to return. If unspecified by\n                    the declaration, this is the same as <FixedFont>responseType.</FixedFont>\n                  </p>\n                  <Example>{`\n                    type ApiResponseTypeOnClient = typeof complexApi.ResponseType\n                    type ApiResponseTypeOnServer = typeof complexApi.ServerResponseType\n                  `}</Example>\n                </>\n              )\n            },\n            {\n              heading: 'Body',\n              anchor: 'types_body',\n              level: 1,\n              content: (\n                <>\n                  <p>\n                    The body for the request follows the same pattern in the opposite direction, with <FixedFont>BodyType</FixedFont> being\n                    the one observed by the server and <FixedFont>CallBodyType</FixedFont> being the one used for API calls.\n                  </p>\n                  <Example>{`\n                    type BodyTypeOnClient = typeof complexApi.CallBodyType\n                    type BodyTypeOnServer = typeof complexApi.BodyType\n                  `}</Example>\n                </>\n              )\n            },\n            {\n              heading: 'Request',\n              anchor: 'types_requset',\n              level: 1,\n              content: (\n                <>\n                  <p>\n                    The papupata request is an express request, possibly modified with your own fields as provided on the API declaration,\n                    but more importantly it has explicit types for params, query and body. You can access the request type for a specific\n                    API using its <FixedFont>RequestType</FixedFont> property.\n                  </p>\n                  <Example>{`\n                    type RequestType = typeof complexApi.RequestType\n                  `}</Example>\n                  <p>This can be especially useful when you want to use a named function as the implementation for an API.</p>\n                </>\n              )\n            },\n            {\n              heading: 'Implementation',\n              anchor: 'implementation',\n              content: (\n                <>\n                  <p>\n                    You can get access to the current implementation and its middleware from the API. The primary use for this is for unit\n                    testing, but a clever individual can undoubtedly come up with other uses as well.\n                  </p>\n                  <Example>{`\n                    const {implementation, implementationMiddleware} = complexApi\n                  `}</Example>\n                </>\n              )\n            }\n          ]}\n        />\n      </Container>\n    </Page>\n  </IndexLayout>\n)\n\nexport default IndexPage\n"],"sourceRoot":""}